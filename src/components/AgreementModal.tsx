// components/AgreementModal.tsx

import React from "react";
import { useAuth } from "@thirdweb-dev/react";

interface AgreementModalProps {
  onAccept: () => void;
}

const AgreementModal: React.FC<AgreementModalProps> = ({ onAccept }) => {
  return (
    <div className="modal-overlay">
      <div className="modal">
        <h2>Договор оферты</h2>
        <p className="agreement-message">
          Для того чтобы продолжить использование платформы, подтвердите согласие с условиями.
        </p>
        <div className="modal-content">
          {/* Блок со скроллом */}
          <div className="agreement-scroll">
            {/* Полный текст договора */}
            <pre>
{`Агентский договор №__
г. Санкт-Петербург                                                                «  »____________2024 г.
Общество с ограниченной ответственностью _____ в лице _____, действующего на основании Устава, именуемое в дальнейшем «Агент», с одной стороны, и
Общество с ограниченной ответственностью _____  в лице _____, действующего на основании Устава, именуемое в дальнейшем «Принципал», с другой стороны,
далее именуемые совместно «Стороны», а по отдельности – «Сторона»,
заключили настоящий Договор о нижеследующем:
    1. Предмет Договора
        1.1. По Договору Агент по заданию Принципала выполняет агентские поручения, состоящие в юридических и фактических действиях, направленных на осуществление расчётов с контрагентами Принципала.
        1.2. Агентские поручения выполняются Агентом по его усмотрению от имени Принципала или от имени Агента, но всегда за счёт Принципала.
        1.3. Для выполнения агентских поручений Агент вправе привлекать третьих лиц без согласования с Принципалом.
        1.4. Заключение Договора, а также его исполнение, в том числе формирование и доведение до Агента агентских поручений осуществляется с использованием платформы «РОСДАО» (далее - Платформа). Правила функционирования Платформы являются составной частью Договора. Принципал настоящим подтверждает ознакомление и согласие с правилами функционирования Платформы, а также с техническим порядком функционирования Платформы.

    2. Права и обязанности Сторон
        2.1. Агент обязан:
            2.1.1. Принять от Принципала денежные средства, иностранную валюту, цифровые финансовые активы либо цифровую валюту (далее именуемые совместно Средства);
            2.1.2. Открыть номинальный счёт, бенефициаром которого является Принципал, в банковской организации по своему выбору, и зачислить на него Средства (в той мере, в которой это применимо к Средствам);
            2.1.3. Предоставить Принципалу с помощью Платформы доступ к сведениям об остатках Средств, предоставленных Принципалом или конвертированных из предоставленных Принципалом;
            2.1.4. Принимать и исполнять поручения Принципала в отношении Средств, как-то:
                2.1.4.1.  Переводить Средства на банковские счета юридических и физических лиц, в том числе на банковские счета юридических и физических лиц, личным законом которых не является право Российской Федерации, а также на банковские счета, открытые за пределами Российской Федерации; 
                2.1.4.2. Переводить Средства на кошельки и иные хранилища цифровых финансовых активов или цифровой валюты, подконтрольные юридическим и физическим лицам, в том числе на кошельки и иные хранилища, подконтрольные юридическим и физическим лицам, личным законом которых не является право Российской Федерации, а также на кошельки и иные хранилища, открытые за пределами Российской Федерации;
                2.1.4.3. Возвращать Принципалу Средства в размере их остатка на банковские счета, кошельки либо иные хранилища цифровых финансовых активов или цифровой валюты, соответственно принадлежащие либо подконтрольные Принципалу.
Сроки выполнения агентских поручений, предусмотренные настоящим подпунктом, не могут превышать разумного срока, однако Агент приступает к их выполнению не позднее 1 рабочего дня с получения агентского поручения.
            2.1.5. Предоставлять Принципалу сведения о выполненных агентских поручениях, в том числе с доступом к истории агентских поручений.
        2.2. Агент вправе:
            2.2.1. По своему усмотрению конвертировать (в том числе неоднократно) Средства, являющиеся денежными средствами или иностранной валютой, в цифровые финансовые активы либо в цифровую валюту, самостоятельно выбирая вид последних. Указанные цифровые финансовые активы либо цифровая валюта также признаются Средствами;
            2.2.2. Самостоятельно выбирать способ исполнения поручений Принципала в отношении Средств, в том числе круг лиц, с посредничеством которых будет выполнено соответствующее поручение.
        2.3. Принципал обязан:
            2.3.1. Своевременно и в полном объёме оплачивать выполнение агентских поручений;
            2.3.2. Предоставлять по запросу Агента документы, являющиеся основаниями для перевода Средств, в установленный Агентом срок, а если срок не установлен – в течение 3 дней со дня получения запроса;
            2.3.3. При необходимости, обозначенной Агентом в соответствующем запросе, незамедлительно принять меры к взаимодействию с банком либо иной организацией, когда это необходимо (согласно запросу Агента) для выполнения агентских поручений;
            2.3.4. Привлекать Агента исключительно к выполнению поручений, необходимых Принципалу для исполнения сделок, соответствующих как законодательству Российской Федерации, так и законодательству государства, чьё право является личным законом получателя Средств, в том числе самостоятельно обеспечивать соответствие указанных сделок валютному законодательству, законодательству о противодействии легализации доходов, полученных преступным путём, и финансированию терроризма;
            2.3.5. Обеспечить возмещение убытков Агента, понесённых Агентом вследствие любых публично-правовых санкций, наложенных на Агента в связи с исполнением агентских поручений по Договору, в течение 7 дней со дня получения от Агента соответствующего требования.
        2.4. Принципал вправе:
            2.4.1.  Получать информацию о ходе, объёме и истории выполнения агентских поручений, не вмешиваясь при этом в деятельность Агента;
            2.4.2. В любой момент потребовать вывода остатка Средств, числящихся за Принципалом, на банковские счета, кошельки либо иные хранилища цифровых финансовых активов или цифровой валюты, соответственно принадлежащие либо подконтрольные Принципалу.

    3. Порядок расчетов. Отчёт Агента. Расходы Агента
        3.1.  Стоимость выполнения Агентом агентских поручений определяется отдельно за каждое поручение.
        3.2. Вознаграждение Агента рассчитывается согласно тарифам, размещённым по адресу: ______ и действующим (опубликованным) на момент исполнения соответствующего агентского поручения. Принципал принимает тарифы, действующие на момент заключения Договора, подтверждает своё ознакомление с ними, а также соглашается с тем, что тарифы могут изменяться по одностороннему волеизъявлению Агента без ограничений.
        3.3. Вознаграждение подлежит оплате Агенту непосредственно перед выполнением соответствующего агентского поручения, т. е. до принятия Принципалом отчёта Агента.
        3.4. Оплата вознаграждения Агента производится путём списания Средств из остатка Средств Принципала вместе со Средствами, необходимыми для выполнения агентского поручения, или отдельно от них.
        3.5. Отчётом Агента признаются сведения о совершённой со Средствами операции, представляемые Агентом в адрес Принципала.
        3.6. Принципал считается принявшим отчёт Агента в случае, если Принципал в течение 3 дней со дня получения отчета Агента не уведомил Агента о невыполнении агентского поручения, приложив доказательства невыполнения. После направления соответствующего уведомления Принципал считается принявшим отчёт Агента после отзыва уведомления о невыполнении агентского поручения или урегулирования разногласий с Агентом в иной форме. 
        3.7. Расходы Агента на выполнение агентских поручений возмещаются в следующем порядке:
            3.7.1. По общему правилу, расходы Агента включаются в вознаграждение Агента и отдельному возмещению не подлежат;
            3.7.2. В случае если вознаграждение Агента не покрывает расходы Агента, понесённые им при выполнении агентского поручения (в том числе (без ограничений) в случае изменения тарифов организаций, осуществляющих перевод денежных средств, или вознаграждения лиц, осуществляющих внесение записей о переходе цифровых финансовых активов или цифровой валюты в распределённый реестр), Агент имеет право на возмещение расходов в части, позволяющей ему получить вознаграждение, которое после вычета расходов Агента было бы равно вознаграждению Агента за вычетом расходов Агента, которое Агент бы получил, если бы соответствующие изменения тарифов и вознаграждений третьих лиц не произошли. В этом случае Агент вправе списать сумму расходов из остатка Средств, и сумма расходов Агента считается возмещённой Агенту с момента такого списания.
            3.7.3. В случае если поручение Агента не выполнено, что повлекло непринятие отчёта Агента, Агент имеет право на возмещение расходов на выполнение поручения, в том числе расходов на конвертацию Средств, на осуществление перевода Средств, на открытие номинального счёта и др. В этом случае сумма расходов Агента считается возмещённой Агенту с момента списания в пользу Агента Средств, которые на момент списания квалифицировались как вознаграждение Агента.

    4. Использование Платформы 
        4.1.  Юридически значимые сообщения в рамках Договора передаются Сторонами только с использованием Платформы, если иное не предусмотрено Договором.
        4.2. В частности, Платформа используется для:
            4.2.1. Формирования и доведения до Агента агентских поручений, в том числе сведений об объёме Средств, в отношении которых даётся агентское поручение, о получателе Средств и иных сведений, если это предусмотрено функционалом Платформы;
            4.2.2. Представления Принципалу отчётов Агента;
            4.2.3. Направления Принципалом уведомлений о невыполнении агентских поручений;
            4.2.4. Обеспечения Агентом доступа к истории агентских поручений;
            4.2.5. Направления запросов сведений/документов;
            4.2.6. Направления уведомлений об отказе от Договора;
            4.2.7. Направления иных уведомлений, требований и других документов, связанных с исполнением Договора.
        4.3. Юридически значимые сообщения, направленные через Платформу, считаются полученными Стороной-адресатом непосредственно после их отправки Стороной-адресантом независимо от проверки Стороной-адресатом новых сообщений, поступивших в её адрес, а также открытия таких сообщений, за исключением случаев, если Сторона-адресат докажет, что сообщение не было ей получено или не могло быть просмотрено по техническим причинам.
        4.4. Стороны соглашаются, что в отношениях между ними юридически значимые сообщения, направленные через Платформу, имеют полную юридическую силу. Данные в любой форме (установленные законом идентификаторы физического или юридического лица, ID, логин и проч.), указывающие на Принципала и на Агента и присовокуплённые к сообщениям, являются простыми электронными подписями соответственно Принципала и Агента. 
        4.5. Юридически значимые сообщения, направленные не через Платформу, не имеют юридической силы, за исключением случаев, когда Сторона-адресант докажет, что направление сообщения через Платформу было непрерывно невозможным в течение как минимум 30 дней.
        4.6. Принципал обязан соблюдать конфиденциальность данных для доступа к Платформе и не передавать такие данные третьим лицам, в том числе для осуществления на Платформе действий от лица Принципала с его согласия. Риск наступления последствий любых действий, совершённых с использованием данных Принципала для доступа к Платформе, лежит на Принципале.
        4.7. Агентом в одностороннем порядке может устанавливаться плата за пользование Платформой. Соответствующая плата устанавливается и изменяется в порядке, аналогичном порядку установления и изменения тарифов за выполнение агентских поручений.
        4.8. Использование Принципал Платформы допускается только в целях исполнения Договора. В случае недействительности, незаключённости либо прекращения действия Договора по любым основаниям Принципал обязан немедленно прекратить использование Платформы.

    5. Ответственность Сторон
        5.1. Стороны за ненадлежащее исполнение обязательств по Договору несут ответственность в соответствии с применимым правом.
        5.2. За просрочку возмещения убытков Агента, понесённых Агентом вследствие любых публично-правовых санкций, наложенных на Агента в связи с исполнением агентских поручений по Договору, Агент вправе требовать от Принципала оплаты неустойки в размере 0,1% от суммы не возмещённых Принципалом убытков за каждый день просрочки.
        5.3. При нарушении Принципалом правил функционирования Платформы, а также положений Договора, регламентирующих использование Платформы, Агент вправе отказаться от Договора с немедленным эффектом.
        5.4. Агент вправе без дополнительного уведомления Принципала приостановить на любой срок выполнение агентских поручений полностью или в части в случае, если имеются основания подозревать нарушение Принципалом обязательств по Договору.
        5.5. Принципал не вправе требовать от Агента возмещения убытков в части упущенной выгоды.
        5.6. Принципал не вправе требовать от Агента возмещения убытков, если убытки возникли вследствие применения к Агенту, а равно к лицам, привлечённым Агентом к выполнению агентских поручений, ограничительных мер экономического характера («санкций»), что сделало выполнение агентских поручений невозможным.
        5.7. Любая из Сторон вправе в одностороннем порядке отказаться от исполнения настоящего Договора в случае существенного нарушения настоящего Договора противоположной Стороной.

    6. Применимое право. Разрешение споров
        6.1. К Договору, а также отношениям, вытекающим из его недействительности, незаключённости или следующим из его прекращения, применяется материальное право Российской Федерации.
        6.2. Споры, возникающие из Договора или в связи с ним, подлежат разрешению в досудебном порядке путём направления потерпевшей Стороной претензии в адрес Стороны-нарушителя.
        6.3. В случае если спор не разрешён в течение 15 дней со дня получения Стороной-нарушителем претензии потерпевшей Стороны, такой спор подлежит передаче на рассмотрение в компетентный суд по месту нахождения Агента.

    7. Заключительные положения
        7.1. Договор вступает в силу с момента его заключения и действует бессрочно до его прекращения по основаниям, предусмотренным Договором или применимым правом.
        7.2. Договор заключается путём регистрации Принципала на Платформе в порядке, предусмотренном правилами функционирования Платформы либо вытекающем из технического порядка функционирования Платформы.
        7.3. Стороны подтверждают, что их воля на установление обязательств по Договору полностью выражена в тексте Договора и что отсутствуют предшествующие договорённости либо переписка, которые отражают значимую волю (мотивы, намерения) любой из Сторон, но не нашли отражения в тексте Договора.
        7.4. Уступка прав Принципала по Договору не допускается без предварительного письменного согласия Агента.

    8. Реквизиты Агента
`}
            </pre>
          </div>
        </div>
        <div className="modal-actions">
          <button onClick={onAccept}>Я согласен с условиями</button>
          {/* Можно добавить кнопку "Отказаться", если необходимо */}
        </div>
      </div>

      {/* Стилизация компонента */}
      <style jsx>{`
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          justify-content: center;
          align-items: center;
          z-index: 1000;
          overflow: auto;
        }
        .modal {
          background: white;
          padding: 20px;
          max-width: 800px;
          max-height: 90%;
          overflow: hidden;
          border-radius: 10px;
          position: relative;
        }
        .modal-content {
          margin-top: 20px;
        }
        .agreement-message {
          font-weight: bold;
          margin-top: 10px;
        }
        .agreement-scroll {
          max-height: 60vh;
          overflow-y: auto;
          padding: 10px;
          border: 1px solid #ccc;
          border-radius: 5px;
          background-color: #f9f9f9;
          white-space: pre-wrap;
        }
        .modal-actions {
          margin-top: 20px;
          display: flex;
          justify-content: flex-end;
        }
        .modal-actions button {
          padding: 10px 20px;
          border: none;
          border-radius: 5px;
          background-color: #0f34f2;
          color: white;
          cursor: pointer;
        }
        .modal-actions button:hover {
          background-color: #3051ff;
        }
      `}</style>
    </div>
  );
};

export default AgreementModal;
